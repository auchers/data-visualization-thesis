webpackJsonp([1],{"2VFs":function(t,e){},"4O9/":function(t,e){},"FYA/":function(t,e){},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("7+uW"),a=n("1e2d"),r=n.n(a),s=n("vwbq"),o=(n("xnE8"),{name:"Map",data:function(){return{msg:"This is the Map Component"}},mounted:function(){var t=this.$store;r.a.accessToken="pk.eyJ1IjoiYXVjaGVyIiwiYSI6ImNqODd4NnBndzFjZDQyd3FocnM4Njc2NWQifQ.dql4s6oWRANbYGt44i6n9A";var e=new r.a.Map({style:"mapbox://styles/aucher/cj87xa4nv3xb02ro4j9o2hatb",center:[-74.0066,40.7135],zoom:13,pitch:60,bearing:32.8,hash:!0,container:"mapbox"});e.on("load",function(){for(var n=e.getStyle().layers,i=0;i<n.length;i++)if("symbol"===n[i].type&&n[i].layout["text-field"]){n[i].id;break}e.addLayer({id:"green-roof-potential",name:"gr-potential",type:"fill-extrusion",source:{type:"vector",url:"mapbox://aucher.2u35uvcm"},"source-layer":"building-layer",filter:["has","shape_area"],paint:{"fill-extrusion-color":["step",["log10",["get","shape_area"]],"rgba(68,1,84,255)",1,"rgba(64,67,135,255)",2,"rgba(41,120,142,255)",3,"rgba(34,168,132,255)",4,"rgba(122,210,81,255)",5,"rgba(253,231,37,255)",6,"rgba(99,82,136,255)"]}}),e.addLayer({id:"existing-green-roof",type:"fill",source:{type:"vector",url:"mapbox://aucher.1kik7pca"},"source-layer":"green_roofs-d1x6o7",filter:["has","Id"],paint:{"fill-color":"#df00d2"}}),e.on("click",function(n){var i=e.queryRenderedFeatures({layers:["green-roof-potential"]}),a=s.a().value(function(t){return Math.log(t.properties.shape_area)})(i),r=i.reduce(function(t,e){return t.cnt=t.cnt+1,t.total_area=t.total_area+e.properties.shape_area,t},{cnt:0,total_area:0});t.commit("storeSummary",r),t.commit("storeHistogramBins",a)})})}}),u={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{attrs:{id:"mapbox"}})},staticRenderFns:[]};var l=n("VU/8")(o,u,!1,function(t){n("2VFs")},null,null).exports,c={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"header"}},[e("h1",[this._v(this._s(this.title))])])},staticRenderFns:[]};var m=n("VU/8")({name:"Header",data:function(){return{title:"Exploring the Potential of Green Roofs in NYC"}},mounted:function(){}},c,!1,function(t){n("4O9/")},null,null).exports,d=n("bOdI"),h=n.n(d),p=n("fZjL"),g=n.n(p),f={name:"Histogram",data:function(){return{msg:"click anywhere on the map to see how the roof areas are distributed within your current view",width:null,height:null,x:null,y:null}},computed:{bins:function(){return this.$store.getters.getHistogramBins},layout:function(){var t,e=this,n=(g()(this.bins).map(function(t){return e.bins[t].x1}),g()(this.bins).map(function(t){return e.bins[t].length}));return this.x.domain([0,15]).range([0,this.width]),this.y.domain([0,s.b(n)]).range([0,this.height]),g()(this.bins).map((t=this,function(e,n,i){var a=t.bins[e];return{x:t.x(a.x0),y:t.y.range()[1]-t.y(a.length),width:t.x(a.x1)-t.x(a.x0),height:t.y(a.length)}}))}},methods:{getStyle:function(t){return{transform:"translate("+t.x0+"px, "+t.x1+"px)"}},getKey:function(t){return""+t.x0}},created:function(){this.x=s.c(),this.y=s.c()},mounted:function(){this.width=this.$refs.svg.getBoundingClientRect().width,this.height=this.$refs.svg.getBoundingClientRect().height}},v={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"histogram"}},[e("p",[this._v(this._s(this.msg))]),this._v(" "),e("svg",{ref:"svg"},this._l(this.layout,function(t){return e("rect",{staticClass:"bar",attrs:{fill:"#aaa",y:t.y,width:t.width,height:t.height,x:t.x}})}))])},staticRenderFns:[]};var y=n("VU/8")(f,v,!1,function(t){n("TGag")},null,null).exports,b=n("9OOc"),x=n.n(b);i.a.use(x.a);var _={name:"RightPanel",components:{Histogram:y},data:function(){return h()({msg:"Explore the Distribution of Roof Areas",div1Text:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Praesent vitae nulla maximus magna fermentum condimentum eget non massa. Proin auctor nisi molestie velit lobortis vestibulum. Sed efficitur suscipit lorem sed aliquet. In vulputate, odio nec eleifend iaculis, metus leo sodales magna, eget tincidunt massa erat sit amet justo. In mollis enim at aliquam posuere. Nulla finibus sed quam eget bibendum. Aliquam quis ultricies mi. Cras nec molestie tellus. Donec ac interdum ex. Quisque vel ipsum vel lectus auctor lobortis. Proin nec scelerisque turpis. Vestibulum felis lectus, tempor vitae nulla non, mollis eleifend libero. Nam quam sem, tempus semper egestas ut, dictum vel purus. Suspendisse eu eros libero. Vivamus faucibus ligula sit amet mi vestibulum, a iaculis nulla aliquet.",div2Text:"",div3Text:""},"div3Text","")},methods:{onWaypoint:function(t){var e=t.el,n=t.going,i=t.direction;n===this.$waypointMap.GOING_IN&&console.log("waypoint going in!",e.id),i===this.$waypointMap.DIRECTION_TOP&&console.log("waypoint going top!",e.id)}},mounted:function(){}},w={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"right-panel"}},[n("h3",[t._v(t._s(t.msg))]),t._v(" "),n("Histogram"),t._v(" "),n("div",{directives:[{name:"waypoint",rawName:"v-waypoint",value:{active:!0,callback:t.onWaypoint},expression:"{ active: true, callback: onWaypoint }"}],staticClass:"scrollSection",attrs:{id:"div1"}},[t._v("\n      "+t._s(t.div1Text)+"\n    ")]),t._v(" "),n("div",{staticClass:"scrollSection div2"},[t._v(t._s(t.div1Text))]),t._v(" "),n("div",{staticClass:"scrollSection div3"},[t._v(t._s(t.div1Text))]),t._v(" "),n("div",{staticClass:"scrollSection div4"},[t._v(t._s(t.div1Text))])],1)},staticRenderFns:[]};var N={name:"App",components:{RightPanel:n("VU/8")(_,w,!1,function(t){n("FYA/")},null,null).exports,Header:m,Map:l},mounted:function(){$.$on("clicked-map",function(t){console.log("payload: ",t)})}},R={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("Header"),this._v(" "),e("div",{attrs:{id:"grid-wrapper"}},[e("Map"),this._v(" "),e("RightPanel")],1)],1)},staticRenderFns:[]};var S=n("VU/8")(N,R,!1,function(t){n("fl/0")},null,null).exports,T=n("/ocq");i.a.use(T.a);var q=new T.a({routes:[{path:"/",name:"Home",component:S}]}),H=n("woOf"),F=n.n(H),I=n("NYxO");i.a.use(I.a);var O=new I.a.Store({state:{debug:!0,summary:[],histogram_bins:[]},getters:{getSummary:function(t){return t.summary},getHistogramBins:function(t){return t.histogram_bins}},actions:{setSummary:function(t){O.commit("storeSummary",t)}},mutations:{storeSummary:function(t,e){t.debug&&console.log("storing summary to store"),t.summary=F()({},e)},storeHistogramBins:function(t,e){t.debug&&console.log("storing histogram bins to store"),t.histogram_bins=F()({},e)}}});n("Q0/0");n.d(e,"bus",function(){return $});var $=new i.a;i.a.config.productionTip=!1,new i.a({el:"#app",store:O,router:q,components:{App:S},template:"<App/>"})},"Q0/0":function(t,e){},TGag:function(t,e){},"fl/0":function(t,e){},xnE8:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.a398f832b450eeee1893.js.map